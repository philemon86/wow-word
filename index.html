<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¶“æ–‡æ ¡ç¨¿å·¥å…· Pro</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-radius: 12px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: "Microsoft JhengHei", "PingFang TC", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: calc(100vh - 100px);
            min-height: 600px;
        }

        .panel {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .panel-header h2 {
            margin: 0;
            font-size: 1.2rem;
            color: #555;
        }

        /* è¼¸å…¥èˆ‡è¼¸å‡ºå€åŸŸæ¨£å¼ */
        textarea, .output-content {
            width: 100%;
            flex-grow: 1;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            font-size: 16px;
            box-sizing: border-box;
            resize: none;
            outline: none;
            overflow-y: auto;
            background-color: #fafafa;
            white-space: pre-wrap;
            font-family: inherit;
        }

        textarea:focus {
            border-color: var(--primary-color);
            background-color: #fff;
        }

        .output-content {
            background-color: #fff;
            border: 1px solid #e0e0e0;
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn-group {
            display: flex;
            gap: 10px;
        }

        button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            font-weight: bold;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #357abd;
        }

        .btn-secondary {
            background-color: #e0e0e0;
            color: #555;
        }

        .btn-secondary:hover {
            background-color: #d0d0d0;
        }

        .btn-clear {
            background-color: #ff6b6b;
            color: white;
        }

        /* é«˜äº®æ¨£å¼ */
        .highlight-scripture {
            background-color: #d1e7dd; /* ç¶“æ–‡ï¼šæ·¡ç¶ è‰² */
            color: #0f5132;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-typo {
            background-color: #f8d7da; /* éŒ¯å­—ï¼šæ·¡ç´…è‰² */
            color: #842029;
            text-decoration: line-through;
            padding: 0 2px;
            margin-right: 4px;
        }

        .highlight-correction {
            background-color: #fff3cd; /* ä¿®æ­£å¾Œï¼šæ·¡é»ƒè‰² */
            color: #664d03;
            font-weight: bold;
            padding: 2px 4px;
            border-radius: 4px;
            border-bottom: 2px solid #ffecb5;
        }

        /* æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                grid-template-columns: 1fr; /* æ”¹ç‚ºå–®æ¬„ */
                height: auto;
                min-height: auto;
            }

            .panel {
                min-height: 350px; /* æ‰‹æ©Ÿç‰ˆæ¯å€‹å€å¡Šçš„é«˜åº¦ */
            }
        }
    </style>
</head>
<body>

<h1>ğŸ“– ç¶“æ–‡æ ¡ç¨¿å·¥å…·</h1>

<div class="container">
    <div class="panel">
        <div class="panel-header">
            <h2>åŸå§‹æ–‡ç« </h2>
            <div class="btn-group">
                <button class="btn-clear" onclick="clearText()">æ¸…ç©º</button>
            </div>
        </div>
        <textarea id="inputText" placeholder="è«‹å°‡æ–‡ç« è²¼åœ¨æ­¤è™•ï¼Œå°‡è‡ªå‹•è½‰æ›éŒ¯åˆ¥å­—èˆ‡ç¶“æ–‡æ ¼å¼..."></textarea>
    </div>

    <div class="panel">
        <div class="panel-header">
            <h2>æ ¡ç¨¿çµæœ</h2>
            <div class="btn-group">
                <button class="btn-secondary" onclick="processText()">âŸ³ é‡æ–°æ•´ç†</button>
                <button class="btn-primary" onclick="copyResult()">ğŸ“‹ è¤‡è£½çµæœ</button>
            </div>
        </div>
        <div id="output" class="output-content"></div>
    </div>
</div>

<script>
    // --- æ•¸æ“šå®šç¾© ---
    
    // æ›¸å·ç°¡ç¨±è¡¨
    const bookAbbreviations = {
        'å‰µä¸–è¨˜': 'å‰µ', 'å‡ºåŸƒåŠè¨˜': 'å‡º', 'åˆ©æœªè¨˜': 'åˆ©', 'æ°‘æ•¸è¨˜': 'æ°‘', 'ç”³å‘½è¨˜': 'ç”³',
        'ç´„æ›¸äºè¨˜': 'æ›¸', 'å£«å¸«è¨˜': 'å£«', 'è·¯å¾—è¨˜': 'å¾—', 'æ’’æ¯è€³è¨˜ä¸Š': 'æ’’ä¸Š', 'æ’’æ¯è€³è¨˜ä¸‹': 'æ’’ä¸‹',
        'åˆ—ç‹ç´€ä¸Š': 'ç‹ä¸Š', 'åˆ—ç‹ç´€ä¸‹': 'ç‹ä¸‹', 'æ­·ä»£å¿—ä¸Š': 'ä»£ä¸Š', 'æ­·ä»£å¿—ä¸‹': 'ä»£ä¸‹', 'ä»¥æ–¯æ‹‰è¨˜': 'æ‹‰',
        'å°¼å¸Œç±³è¨˜': 'å°¼', 'ä»¥æ–¯å¸–è¨˜': 'æ–¯', 'ç´„ä¼¯è¨˜': 'ä¼¯', 'è©©ç¯‡': 'è©©', 'ç®´è¨€': 'ç®´',
        'å‚³é“æ›¸': 'å‚³', 'é›…æ­Œ': 'æ­Œ', 'ä»¥è³½äºæ›¸': 'è³½', 'è€¶åˆ©ç±³æ›¸': 'è€¶', 'è€¶åˆ©ç±³å“€æ­Œ': 'å“€',
        'ä»¥è¥¿çµæ›¸': 'çµ', 'ä½†ä»¥ç†æ›¸': 'ä½†', 'ä½•è¥¿é˜¿æ›¸': 'ä½•', 'ç´„ç¥æ›¸': 'ç¥', 'é˜¿æ‘©å¸æ›¸': 'æ‘©',
        'ä¿„å·´åº•äºæ›¸': 'ä¿„', 'ç´„æ‹¿æ›¸': 'æ‹¿', 'å½Œè¿¦æ›¸': 'å½Œ', 'é‚£é´»æ›¸': 'é´»', 'å“ˆå·´è°·æ›¸': 'å“ˆ',
        'è¥¿ç•ªé›…æ›¸': 'ç•ª', 'å“ˆè©²æ›¸': 'è©²', 'æ’’è¿¦åˆ©äºæ›¸': 'äº', 'ç‘ªæ‹‰åŸºæ›¸': 'ç‘ª',
        'é¦¬å¤ªç¦éŸ³': 'å¤ª', 'é¦¬å¯ç¦éŸ³': 'å¯', 'è·¯åŠ ç¦éŸ³': 'è·¯', 'ç´„ç¿°ç¦éŸ³': 'ç´„', 'ä½¿å¾’è¡Œå‚³': 'å¾’',
        'ç¾…é¦¬æ›¸': 'ç¾…', 'å“¥æ—å¤šå‰æ›¸': 'æ—å‰', 'å“¥æ—å¤šå¾Œæ›¸': 'æ—å¾Œ', 'åŠ æ‹‰å¤ªæ›¸': 'åŠ ', 'ä»¥å¼—æ‰€æ›¸': 'å¼—',
        'è…“ç«‹æ¯”æ›¸': 'è…“', 'æ­Œç¾…è¥¿æ›¸': 'è¥¿', 'å¸–æ’’ç¾…å°¼è¿¦å‰æ›¸': 'å¸–å‰', 'å¸–æ’’ç¾…å°¼è¿¦å¾Œæ›¸': 'å¸–å¾Œ', 'ææ‘©å¤ªå‰æ›¸': 'æå‰',
        'ææ‘©å¤ªå¾Œæ›¸': 'æå¾Œ', 'æå¤šæ›¸': 'å¤š', 'è…“åˆ©é–€æ›¸': 'é–€', 'å¸Œä¼¯ä¾†æ›¸': 'ä¾†', 'é›…å„æ›¸': 'é›…',
        'å½¼å¾—å‰æ›¸': 'å½¼å‰', 'å½¼å¾—å¾Œæ›¸': 'å½¼å¾Œ', 'ç´„ç¿°ä¸€æ›¸': 'ç´„ä¸€', 'ç´„ç¿°äºŒæ›¸': 'ç´„äºŒ', 'ç´„ç¿°ä¸‰æ›¸': 'ç´„ä¸‰',
        'çŒ¶å¤§æ›¸': 'çŒ¶', 'å•Ÿç¤ºéŒ„': 'å•Ÿ',
        // å¸¸è¦‹ç°¡ç¨±è£œå……
        'é¦¬å¤ª': 'å¤ª', 'é¦¬å¯': 'å¯', 'è·¯åŠ ': 'è·¯', 'ç´„ç¿°': 'ç´„'
    };

    // éŒ¯åˆ¥å­—ä¿®æ­£è¡¨
    const typoCorrections = {
        'å®‰ç¥¥': 'å®‰è©³', 'å°ç£': 'è‡ºç£', 'è¬›å°': 'è¬›è‡º', 'å§Šå¦¹': 'å§å¦¹', 'è£é¢': 'è£¡é¢',
        'ç”šéº¼': 'ä»€éº¼', 'ç§˜å¯†': 'ç¥•å¯†', 'å¥§ç§˜': 'å¥§ç¥•', 'æŒ‰æ­¥å°±ç­': 'æŒ‰éƒ¨å°±ç­', 'ä¸æ˜ç©¶ç†': 'ä¸æ˜å°±è£¡',
        'æ·¬ç·´': 'æ·¬éŠ', 'å€Ÿæ©Ÿ': 'è—‰æ©Ÿ', 'æ‹¼å‘½': 'æ‹šå‘½', 'ç…é‚£': 'å‰é‚£', 'èº«ä»½': 'èº«åˆ†',
        'ç†Ÿæ»': 'ç†Ÿç¨”', 'ç„¡æ‰€é©äº‹': 'ç„¡æ‰€äº‹äº‹', 'æ’’é¦¬åˆ©äº': 'æ’’ç‘ªåˆ©äº', 'åšè¦‹è­‰': 'ä½œè¦‹è­‰', 'æŠµæ¯€': 'è©†æ¯€',
        'æœä¾': 'æœäº‹', 'æ¨¡æ“¬å…©å¯': 'æ¨¡ç¨œå…©å¯', 'ç´„æ—¦æ²³': 'ç´„ä½†æ²³', 'ä¼¸ä»—': 'ä¼¸æ–', 'æ’’æ—¦': 'æ’’ä½†',
        'ç”Ÿæ´»ç„¡æ…®': 'ç”Ÿæ´»ç„¡è™', 'å‘¨å…­': 'é€±å…­', 'çœ¼è‡‰': 'çœ¼ç¼', 'éƒ¨ä»½': 'éƒ¨åˆ†', 'æ·ºç§»é»˜åŒ–': 'æ½›ç§»é»˜åŒ–',
        'ä½ˆæ»¿': 'å¸ƒæ»¿', 'ç¹å»¶': 'ç¹è¡', 'å…¬ä½ˆ': 'å…¬å¸ƒ', 'é »è‡¨': 'ç€•è‡¨', 'ä½ˆç½®': 'å¸ƒç½®',
        'æœ­æ ¹': 'æ‰æ ¹', 'æ‰ç‡Ÿ': 'ç´®ç‡Ÿ', 'æ‰å¯¦': 'ç´®å¯¦', 'ç§˜è¨£': 'ç¥•è¨£', 'é›¨éå¤©æ™´': 'é›¨éå¤©é’',
        'æ™´å¤©éœ¹é‚': 'é’å¤©éœ¹é‚', 'è¬›åœ‹èª': 'è¬›ä¸­æ–‡', 'è‡ºèª': 'é–©å—èª', 'èƒŒé€†': 'æ‚–é€†', 'å¿…éœ€': 'å¿…é ˆ',
        'é ˆè¦': 'éœ€è¦', 'æ¼«å»¶': 'è”“å»¶', 'ç¶‘ç¶': 'æ†ç¶', 'é£¢è’': 'é¥‘è’', 'è­¦é†’': 'å„†é†’',
        'å¤¢é¨': 'å¤¢é­˜', 'è£œé¢¨': 'æ•é¢¨', 'ä¸æŠ€ä¸æ±‚': 'ä¸å¿®ä¸æ±‚', 'æ—¥æ¼¸å¥½è½‰': 'æ—¥è¦‹å¥½è½‰', 'æ¦»é™·': 'å¡Œé™·',
        'è¦ç•«': 'è¦åŠƒ', 'ä¼ç•«': 'ä¼åŠƒ'
    };

    // --- å·¥å…·å‡½æ•¸ ---

    function chineseToNumber(chineseNum) {
        const cnNums = {'é›¶':0,'ä¸€':1,'äºŒ':2,'ä¸‰':3,'å››':4,'äº”':5,'å…­':6,'ä¸ƒ':7,'å…«':8,'ä¹':9};
        const cnUnits = {'å':10,'ç™¾':100,'åƒ':1000,'è¬':10000};
        
        // ç°¡å–®è™•ç†ï¼šå¦‚æœæ˜¯ç´”é˜¿æ‹‰ä¼¯æ•¸å­—å­—ä¸²
        if (/^\d+$/.test(chineseNum)) return parseInt(chineseNum, 10);

        let total = 0;
        let section = 0;
        let number = 0;
        let unitOps = false; // æ˜¯å¦å‰›æ“ä½œéå–®ä½

        for(let i = 0; i < chineseNum.length; i++){
            const c = chineseNum.charAt(i);
            if(cnNums.hasOwnProperty(c)){
                number = cnNums[c];
                unitOps = false;
            } else if(cnUnits.hasOwnProperty(c)){
                let unit = cnUnits[c];
                // è™•ç† "å" é–‹é ­çš„æƒ…æ³ (å¦‚ï¼šåäºŒç«  -> 12)
                if (unit === 10 && number === 0 && !unitOps) number = 1;
                
                section = (section + number) * unit;
                if (unit >= 10000) { // è¬ä»¥ä¸Šé€²ä½
                    total += section;
                    section = 0;
                } else {
                    total += section;
                    section = 0; // ç°¡æ˜“ç‰ˆè™•ç†ï¼Œé€™éƒ¨åˆ†é‚è¼¯å¯ä»¥æ›´åš´è¬¹ï¼Œä½†å°æ–¼ç« ç¯€æ•¸å­—é€šå¸¸å¤ ç”¨
                }
                number = 0;
                unitOps = true;
            } else if(/\d/.test(c)){
                 number = parseInt(c, 10);
            }
        }
        // è™•ç† "ä¸€ç« " é€™ç¨®æƒ…æ³ï¼Œæˆ–è€…å°¾æ•¸
        if (!unitOps) total += number; 
        
        // ç‰¹æ®Šä¿®æ­£ï¼šå¦‚æœåœ¨å¾ªç’°ä¸­é‚è¼¯ç´¯ç©éŒ¯èª¤ï¼Œé‡å°å¸¸è¦‹çš„ã€Œåå¹¾ã€åšä¿åº•
        if (total === 0 && chineseNum.startsWith('å')) {
            let temp = 10;
            if (chineseNum.length > 1) temp += cnNums[chineseNum[1]] || 0;
            return temp;
        }

        return total > 0 ? total : number;
    }

    function numberToChinese(num) {
        const cnNums = ['é›¶','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'];
        const cnUnits = ['','å','ç™¾','åƒ'];
        let str = '';
        let numStr = num.toString();
        let len = numStr.length;
        
        // ç°¡å–®è½‰æ›ï¼Œé‡å°è–ç¶“ç« æ•¸é€šå¸¸ä¸å¤§
        if (num === 0) return 'é›¶';
        if (num === 10) return 'å';
        if (num > 10 && num < 20) {
            return 'å' + cnNums[num % 10];
        }

        for(let i = 0; i < len; i++){
            let n = parseInt(numStr.charAt(len - i -1));
            let digit = cnNums[n];
            let unit = cnUnits[i];
            
            if (n !== 0) {
                str = digit + unit + str;
            } else if (str.length > 0 && !str.startsWith('é›¶')) {
                str = 'é›¶' + str;
            }
        }
        return str.replace(/é›¶+$/, '');
    }

    // --- ä¸»è¦é‚è¼¯ ---

    function processText() {
        const inputEl = document.getElementById('inputText');
        const outputEl = document.getElementById('output');
        let text = inputEl.value;

        if (!text) {
            outputEl.innerHTML = '<span style="color:#999;">ç­‰å¾…è¼¸å…¥...</span>';
            return;
        }

        // 1. è™•ç†éŒ¯åˆ¥å­— (ä¸¦åŠ ä¸Šæ¨™è¨˜)
        for (let typo in typoCorrections) {
            let correction = typoCorrections[typo];
            let typoRegex = new RegExp(typo, 'g');
            text = text.replace(typoRegex, `<span class="highlight-typo">${typo}</span><span class="highlight-correction">${correction}</span>`);
        }

        // 2. è™•ç†ç¶“æ–‡å¼•ç”¨
        // Regex é‚è¼¯ï¼šå°‹æ‰¾å…¨å½¢æ‹¬è™Ÿï¼Œä¸”å…§å®¹çœ‹ä¼¼ç¶“æ–‡
        text = text.replace(/ï¼ˆ([^ï¼‰]+)ï¼‰/g, function (match, content) {
            // æª¢æŸ¥æ˜¯å¦åŒ…å«æ›¸å·å
            let foundBook = null;
            let bookAbbr = '';
            
            // å…ˆæ¯”å°æœ€é•·çš„æ›¸å·åï¼Œé¿å… "æ’’æ¯è€³è¨˜ä¸Š" è¢«å°æ‡‰æˆ "æ’’" (å¦‚æœæœ‰çš„è©±)
            let sortedBooks = Object.keys(bookAbbreviations).sort((a, b) => b.length - a.length);

            for (let book of sortedBooks) {
                if (content.startsWith(book)) {
                    foundBook = book;
                    bookAbbr = bookAbbreviations[book];
                    break;
                }
            }

            if (!foundBook) return match; // ä¸æ˜¯ç¶“æ–‡ï¼Œä¿æŒåŸæ¨£

            let remain = content.substring(foundBook.length).trim();
            
            // è§£æç« ç¯€ï¼šæ”¯æ´ "12ç« 34ç¯€", "åäºŒç« 34", "12:34", "12.34"
            // ç§»é™¤ "ç« ", "ç¯‡", "ç¯€", ç©ºæ ¼
            let cleanRef = remain.replace(/[ç« ç¯‡ç¯€\s]/g, ':');
            // å°‡å¤šé¤˜çš„ç¬¦è™Ÿè½‰ç‚ºå–®ä¸€åˆ†éš”ç¬¦
            cleanRef = cleanRef.replace(/[:ï¼š.ï¼]+/g, ':');
            
            let parts = cleanRef.split(':').filter(p => p);
            
            if (parts.length === 0) return match; // åªæœ‰æ›¸å·å?

            let chapter = parts[0];
            let verse = parts.length > 1 ? parts[1] : '';

            // è™•ç†ç« ï¼šè½‰ç‚ºä¸­æ–‡æ•¸å­—
            let chapterNum = chineseToNumber(chapter);
            let chapterChi = numberToChinese(chapterNum);

            // è™•ç†ç¯€ï¼šä¿æŒé˜¿æ‹‰ä¼¯æ•¸å­— (è™•ç†ç¯„åœå¦‚ 1-3)
            let verseStr = '';
            if (verse) {
                // å¦‚æœç¯€åŒ…å«ç¯„åœ (å¦‚ ä¸€è‡³ä¸‰, 1-3)
                if (verse.includes('-') || verse.includes('ï¼') || verse.includes('è‡³')) {
                   let vParts = verse.split(/[-ï¼è‡³]/);
                   let v1 = chineseToNumber(vParts[0]);
                   let v2 = chineseToNumber(vParts[1]);
                   verseStr = `${v1}-${v2}`;
                } else {
                   verseStr = chineseToNumber(verse).toString();
                }
            }

            let newRef = `ï¼ˆ${bookAbbr}${chapterChi}${verseStr}ï¼‰`;
            return `<span class="highlight-scripture">${newRef}</span>`;
        });

        // å°‡æ›è¡Œç¬¦è™Ÿè½‰ç‚º <br>
        text = text.replace(/\n/g, '<br>');

        outputEl.innerHTML = text;
    }

    // --- UI äº’å‹• ---

    function clearText() {
        if(confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å…§å®¹å—ï¼Ÿ')) {
            document.getElementById('inputText').value = '';
            document.getElementById('output').innerHTML = '';
        }
    }

    function copyResult() {
        const outputEl = document.getElementById('output');
        // ç‚ºäº†è¤‡è£½ç´”æ–‡å­—ï¼ˆå»é™¤HTMLæ¨™ç±¤ä½†ä¿ç•™æ›è¡Œï¼‰ï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹è‡¨æ™‚è™•ç†
        // ä½†ç”¨æˆ¶å¯èƒ½æƒ³è¦è¤‡è£½å·²ç¶“æ ¡æ­£å¥½çš„æ–‡å­—ï¼ˆä¸éœ€è¦éŒ¯å­—æ¨™ç¤ºï¼‰
        
        // å–å¾—ç´”æ–‡æœ¬å…§å®¹é‚è¼¯ï¼š
        // 1. è¤‡è£½ innerText (æœƒå¿½ç•¥æ‰ html tag)
        // ä½†æˆ‘å€‘çš„ HTML è£¡æœ‰ <span class="highlight-typo">éŒ¯å­—</span>ï¼Œé€™ä¸æ‡‰è©²è¢«è¤‡è£½é€²å»
        // æ‰€ä»¥æˆ‘å€‘éœ€è¦é‡æ–°ç”Ÿæˆä¸€å€‹ "ç´”æ·¨ç‰ˆ" çš„æ–‡å­—
        
        let rawText = outputEl.innerText;
        
        // æ›´å¥½çš„æ–¹æ³•ï¼šç›´æ¥å¾ HTML ä¸­ç§»é™¤ .highlight-typo å…ƒç´ ï¼Œç„¶å¾Œå– textContent
        let tempDiv = document.createElement('div');
        tempDiv.innerHTML = outputEl.innerHTML;
        
        // ç§»é™¤æ‰€æœ‰éŒ¯å­—æ¨™è¨˜ (åŸæœ¬çš„éŒ¯å­—)
        let typos = tempDiv.querySelectorAll('.highlight-typo');
        typos.forEach(el => el.remove());
        
        // ç¶“æ–‡å’Œæ›´æ­£å¾Œçš„å­—ï¼Œç›´æ¥ä¿ç•™æ–‡å­—å³å¯
        let finalCopyText = tempDiv.innerText;

        navigator.clipboard.writeText(finalCopyText).then(() => {
            alert('å…§å®¹å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
        }).catch(err => {
            console.error('è¤‡è£½å¤±æ•—:', err);
            alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ã€‚');
        });
    }

    // ç›£è½è¼¸å…¥äº‹ä»¶ï¼Œå¯¦ç¾å³æ™‚é è¦½ (Debounce é¿å…éåº¦é »ç¹)
    let timeout = null;
    document.getElementById('inputText').addEventListener('input', function() {
        clearTimeout(timeout);
        timeout = setTimeout(processText, 300); // åœæ­¢æ‰“å­— 0.3 ç§’å¾ŒåŸ·è¡Œ
    });

    // é é¢åŠ è¼‰å¾Œè‹¥æœ‰å…§å®¹å‰‡è™•ç†ä¸€æ¬¡
    window.onload = processText;

</script>

</body>
</html>
